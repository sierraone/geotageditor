<script src="https://api.labelbox.com/static/labeling-api.js"></script>
<div id="form"></div>
<script>
  function label(label) {
    Labelbox.setLabelForAsset(label).then(() => {
      Labelbox.fetchNextAssetToLabel();
    });
  }

  Labelbox.currentAsset().subscribe(asset => {
    if (asset) {
      drawItem(asset.data,asset.label);
    }
  });

  function drawItem(dataToLabel,existingLabel) {
    var url = dataToLabel;
    var jsonAsset;
    console.log(url);
    fetch(url)
      .then(function(response) {
        response.text().then(function(text) {
          jsonAsset = text;
          console.log("Text: "+text);
          done();
        })
      });
    const labelForm = `
    ${dataToLabel}</p>
    <div id="text_field"></div>
    <div style="display: flex;">
      <button onclick="label('bad')">Bad Quality</button>
      <button onclick="label('good')">Good Quality</button>
    </div>
    <div>${existingLabel}</div>
  `;
    document.querySelector("#form").innerHTML = labelForm;
  }

  function done() {
    document.getElementById("text_field").innerHTML = jsonAsset;
  }
</script>
<script src="https://api.labelbox.com/static/labeling-api.js"></script>
<div id="form"></div>
<script>

  function label(label) {
    Labelbox.setLabelForAsset(label).then(() => {
      Labelbox.fetchNextAssetToLabel();
    });
  }

  Labelbox.currentAsset().subscribe(asset => {
    if (asset) {
      drawItem(asset.data,asset.label);
    }
  });

  function drawItem(dataToLabel,existingLabel) {
    var url = dataToLabel;
    if (!existingLabel) existingLabel = "";
    fetch(url)
      .then(function(response) {
        response.text().then(function(text) {
          document.getElementById("text_field").innerHTML = text;

          // text to JSON
          js = JSON.parse(text);
          console.log(js);
          
          //set iframe src
          document.getElementById('frame').src = 'https://dropoff.ai';
        })
      });
    const labelForm = `
    <div id="text_field"></div>
    <iframe id='frame'/>
    <div style="display: flex;">
      <button onclick="label('bad')">Bad Quality</button>
      <button onclick="label('good')">Good Quality</button>
    </div>
    <div>${existingLabel}</div>
  `;
    document.querySelector("#form").innerHTML = labelForm;
  }

</script>